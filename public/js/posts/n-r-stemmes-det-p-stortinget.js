// hello

(function () {
    var voteCounts  = {"1254873600":1,"1255305600":5,"1256083200":1,"1256169600":9,"1257379200":1,"1257811200":2,"1258416000":8,"1258588800":5,"1259107200":53,"1259193600":1,"1259280000":3,"1259798400":19,"1259884800":2,"1260144000":13,"1260230400":48,"1260316800":28,"1260403200":22,"1260489600":20,"1260748800":18,"1260835200":34,"1261008000":13,"1262822400":2,"1263254400":8,"1263427200":1,"1265068800":1,"1265241600":6,"1265673600":1,"1265846400":12,"1266278400":3,"1266451200":7,"1267488000":20,"1267660800":15,"1267747200":20,"1268092800":31,"1268265600":14,"1268870400":7,"1268956800":18,"1269216000":14,"1269302400":14,"1269475200":17,"1269561600":3,"1271635200":12,"1271721600":12,"1272326400":9,"1272499200":9,"1272844800":2,"1272931200":7,"1273104000":6,"1273449600":19,"1273536000":17,"1274745600":27,"1274832000":1,"1274918400":19,"1275264000":2,"1275436800":5,"1275523200":7,"1275609600":4,"1275868800":17,"1275955200":25,"1276041600":9,"1276128000":34,"1276214400":13,"1276473600":51,"1276560000":44,"1276646400":15,"1276732800":30,"1276819200":31,"1286150400":8,"1286755200":1,"1286841600":3,"1286928000":2,"1288224000":11,"1288310400":10,"1289433600":18,"1289520000":4,"1289865600":18,"1290038400":11,"1290124800":12,"1290470400":20,"1290729600":46,"1291075200":14,"1291248000":11,"1291334400":9,"1291593600":24,"1291680000":21,"1291766400":28,"1291852800":30,"1291939200":18,"1292198400":54,"1292284800":17,"1292371200":32,"1292457600":26,"1292544000":16,"1294704000":9,"1295222400":1,"1296518400":4,"1296691200":2,"1297123200":6,"1297296000":17,"1297728000":7,"1297900800":3,"1298332800":27,"1298505600":18,"1299715200":18,"1299801600":2,"1300060800":10,"1300147200":22,"1300665600":12,"1300752000":5,"1301270400":6,"1301356800":12,"1301875200":8,"1301961600":41,"1302480000":17,"1302566400":24,"1302739200":43,"1303776000":17,"1303948800":2,"1304294400":19,"1304380800":5,"1304553600":5,"1304899200":1,"1304985600":1,"1305763200":13,"1306108800":17,"1306195200":13,"1306368000":9,"1306454400":9,"1306713600":6,"1306800000":17,"1307318400":27,"1307404800":27,"1307491200":19,"1307577600":29,"1307664000":11,"1308009600":59,"1308096000":27,"1308182400":48,"1308268800":37,"1317686400":7,"1318291200":1,"1318377600":1,"1319673600":2,"1320883200":24,"1320969600":5,"1321315200":5,"1321488000":3,"1321574400":8,"1321920000":8,"1322179200":43,"1322438400":9,"1322524800":8,"1322697600":23,"1322784000":4,"1323043200":21,"1323129600":24,"1323216000":16,"1323302400":18,"1323388800":10,"1323648000":33,"1323734400":23,"1323820800":25,"1323907200":28,"1323993600":15,"1324252800":9,"1324339200":13,"1326067200":10,"1326153600":3,"1326326400":4,"1326931200":2,"1327968000":8,"1328572800":18,"1328745600":3,"1329350400":5,"1330387200":2,"1330560000":46,"1330992000":2,"1331164800":9,"1332115200":27,"1332201600":18,"1332374400":15,"1332720000":8,"1332806400":5,"1332979200":16,"1334188800":14,"1334534400":2,"1334620800":2,"1335225600":1,"1335398400":2,"1336003200":19,"1336348800":10,"1336435200":4,"1336608000":19,"1336953600":8,"1337040000":19,"1337558400":16,"1337644800":5,"1337817600":11,"1338249600":18,"1338336000":3,"1338422400":24,"1338768000":26,"1338854400":21,"1338940800":7,"1339027200":36,"1339372800":56,"1339459200":46,"1339545600":17,"1339632000":42,"1339718400":17,"1349395200":9,"1349740800":7,"1349913600":8,"1350345600":4,"1351123200":11,"1352332800":7,"1352937600":14,"1353369600":19,"1353542400":11,"1353974400":40,"1354147200":28,"1354233600":10,"1354579200":29,"1354665600":23,"1354752000":40,"1354838400":11,"1355097600":42,"1355184000":24,"1355270400":25,"1355356800":28,"1355443200":9,"1355702400":35,"1355788800":26,"1357776000":1,"1358380800":3,"1358812800":12,"1358985600":8,"1360022400":3,"1360195200":10,"1360627200":22,"1360800000":1,"1361232000":25,"1361404800":1,"1362441600":4,"1362614400":9,"1363564800":21,"1363651200":37,"1363824000":34,"1364860800":16,"1365033600":2,"1365465600":2,"1366070400":8,"1366675200":25,"1367193600":20,"1367280000":6,"1367884800":14,"1368489600":19,"1368662400":7,"1369094400":4,"1369612800":36,"1369699200":20,"1369872000":23,"1370217600":16,"1370304000":45,"1370476800":49,"1370563200":21,"1370822400":88,"1370995200":7,"1371081600":67,"1371168000":32,"1371427200":90,"1371513600":76,"1371600000":52,"1371686400":44,"1371772800":13,"1381104000":1,"1382054400":1,"1382486400":5,"1382572800":2,"1384214400":9,"1384819200":3,"1385424000":8,"1385596800":2,"1386028800":8,"1386115200":5,"1386201600":13,"1386288000":5,"1386547200":21,"1386633600":14,"1386720000":6,"1386806400":14,"1386892800":9,"1387152000":11,"1387238400":14,"1387411200":7,"1389657600":5,"1389830400":5,"1391040000":5,"1391472000":2,"1392076800":2,"1392249600":7,"1393286400":15,"1393459200":4,"1393891200":1,"1394064000":4,"1395100800":8,"1395273600":10,"1395705600":6,"1395878400":4,"1396310400":5,"1396483200":9,"1396915200":6,"1397088000":4,"1398297600":5,"1399334400":11,"1399507200":2,"1399939200":41,"1400544000":7,"1400716800":12,"1400803200":2,"1401148800":6,"1401753600":25,"1401926400":13,"1402358400":27,"1402444800":8,"1402531200":25,"1402617600":8,"1402876800":85,"1402963200":44,"1403049600":16,"1403136000":30,"1403222400":30,"1412640000":3,"1413244800":2,"1413417600":1,"1413849600":1,"1415664000":4,"1415836800":11,"1416268800":9,"1416441600":7,"1416873600":16,"1417392000":26,"1417478400":24,"1417651200":11,"1417737600":10,"1417996800":46,"1418083200":34,"1418169600":18,"1418256000":23,"1418342400":30,"1418601600":39,"1418688000":27,"1418860800":7,"1421107200":1,"1422489600":4,"1422921600":33,"1423094400":21,"1423526400":3,"1423699200":7};
    var rebelCounts = {"1255305600":2,"1258416000":1,"1259107200":12,"1259798400":7,"1260144000":2,"1260230400":27,"1260316800":10,"1260403200":6,"1260748800":4,"1260835200":2,"1261008000":3,"1265241600":4,"1265846400":12,"1266451200":10,"1267488000":14,"1267747200":7,"1268092800":32,"1268265600":9,"1268870400":4,"1268956800":10,"1269216000":3,"1269302400":23,"1269475200":12,"1271635200":4,"1271721600":22,"1272326400":1,"1272499200":10,"1272931200":10,"1273104000":1,"1273449600":23,"1273536000":19,"1274745600":11,"1274918400":24,"1275523200":2,"1275868800":12,"1275955200":3,"1276041600":2,"1276128000":29,"1276214400":6,"1276473600":17,"1276560000":32,"1276646400":7,"1276732800":11,"1276819200":14,"1286150400":4,"1288224000":12,"1288310400":5,"1289433600":15,"1289520000":6,"1290038400":1,"1290124800":5,"1290470400":8,"1290729600":5,"1291075200":5,"1291248000":10,"1291334400":1,"1291593600":4,"1291680000":5,"1291766400":9,"1291852800":7,"1291939200":3,"1292198400":19,"1292284800":5,"1292371200":5,"1292457600":8,"1292544000":8,"1296518400":8,"1297123200":2,"1297296000":12,"1297728000":2,"1298332800":6,"1298505600":10,"1299715200":21,"1300060800":6,"1300147200":8,"1300665600":1,"1300752000":3,"1301270400":1,"1301875200":29,"1301961600":14,"1302480000":9,"1302566400":20,"1302739200":28,"1303776000":16,"1304294400":7,"1305763200":5,"1306108800":7,"1306368000":1,"1306713600":2,"1306800000":13,"1307318400":6,"1307404800":8,"1307491200":20,"1307577600":12,"1308009600":24,"1308096000":12,"1308182400":14,"1308268800":21,"1320883200":4,"1320969600":2,"1321574400":2,"1322179200":12,"1322438400":4,"1322524800":2,"1322697600":9,"1322784000":4,"1323043200":3,"1323129600":4,"1323216000":2,"1323302400":2,"1323388800":2,"1323648000":8,"1323734400":4,"1323820800":6,"1323907200":17,"1323993600":7,"1324252800":1,"1324339200":5,"1326153600":4,"1326326400":1,"1327968000":5,"1328572800":54,"1329350400":6,"1330387200":2,"1330560000":10,"1331164800":3,"1332115200":7,"1332201600":11,"1332374400":9,"1332720000":2,"1332979200":4,"1334188800":3,"1334534400":4,"1336003200":16,"1336348800":12,"1336435200":3,"1336608000":10,"1337040000":11,"1337558400":7,"1337644800":1,"1337817600":4,"1338249600":2,"1338422400":14,"1338768000":27,"1338854400":4,"1339027200":8,"1339372800":13,"1339459200":17,"1339545600":6,"1339632000":23,"1339718400":3,"1349395200":2,"1349913600":1,"1350345600":2,"1351123200":8,"1352332800":7,"1352937600":2,"1353369600":6,"1353542400":1,"1353974400":3,"1354147200":7,"1354233600":4,"1354579200":4,"1354665600":1,"1354752000":28,"1354838400":5,"1355097600":9,"1355184000":3,"1355270400":6,"1355356800":8,"1355443200":1,"1355702400":16,"1355788800":6,"1358812800":12,"1360195200":2,"1360627200":32,"1361232000":16,"1362614400":5,"1363564800":1,"1363651200":31,"1363824000":17,"1364860800":1,"1365033600":1,"1366070400":6,"1366675200":12,"1367193600":8,"1367280000":2,"1367884800":2,"1368489600":3,"1369094400":2,"1369612800":20,"1369699200":8,"1369872000":4,"1370217600":7,"1370304000":14,"1370476800":14,"1370563200":5,"1370822400":38,"1371081600":20,"1371168000":4,"1371427200":20,"1371513600":12,"1371600000":14,"1371686400":31,"1371772800":5,"1385424000":1,"1386115200":1,"1386201600":3,"1386288000":2,"1386547200":2,"1386633600":3,"1386806400":6,"1386892800":1,"1387411200":4,"1393286400":2,"1393459200":5,"1395100800":1,"1395705600":2,"1397088000":1,"1398297600":3,"1399334400":12,"1399507200":1,"1399939200":30,"1400544000":1,"1400716800":2,"1401148800":3,"1401753600":2,"1401926400":4,"1402358400":4,"1402531200":15,"1402617600":3,"1402876800":11,"1402963200":1,"1403049600":6,"1403136000":8,"1403222400":2,"1415664000":1,"1415836800":2,"1416268800":1,"1416441600":1,"1416873600":1,"1417392000":2,"1417478400":8,"1417651200":1,"1417737600":2,"1417996800":25,"1418083200":14,"1418169600":4,"1418256000":7,"1418342400":5,"1418601600":10,"1418688000":5,"1422921600":3,"1423094400":3,"1423699200":1};

    function heatmap() {
        cal = new CalHeatMap();
        cal.init({
            itemSelector: '#nar-stemmes-det-pa-stortinget-calendar',
            domain: 'year',
            subDomain: 'day',
            start: new Date(2009, 0, 1),
            minDate: new Date(2009, 0, 1),
            maxDate: new Date(2014, 11, 1),
            data: voteCounts,
            range: 6,
            verticalOrientation: true,
            tooltip: true,
            label: { position: 'top' },
            colLimit: 52,
            subDomainDateFormat: function (date) { return moment(date).format('ll'); },
            itemName: ['avstemning', 'avstemninger'],
            subDomainTitleFormat: {filled: '{date}: {count} {name}'}
        });

        var select = d3.select('#nar-stemmes-det-pa-stortinget-calendar-select');
        select.on('change', function () {
            if (d3.event.target.value === 'Avstemninger') {
                cal.options.itemName = ['avstemning', 'avstemninger'];
                cal.update(voteCounts);
            } else {
                cal.options.itemName = ['utbryterstemme', 'utbryterstemmer'];
                cal.update(rebelCounts);
            }
        });
    }

    function scatter() {
        var chart = c3.generate({
            bindto: '#nar-stemmes-det-pa-stortinget-scatter',
            data: {
                xs: {
                    Avstemninger: 'Utbryterstemmer'
                },
                columns: [
                    ['Avstemninger', 2,1,7,3,1,25,9,5,3,2,2,2,8,5,6,7,6,5,1,8,2,7,10,4,5,1,4,7,1,5,10,6,12,2,10,3,2,18,3,8,13,4,9,9,3,5,5,3,2,1,3,4,4,3,7,1,3,4,5,6,3,9,3,4,6,5,2,2,4,1,3,7,7,5,4,1,3,1,6,9,4,7,16,8,7,3,6,1,2,5,3,6,9,8,13,10,10,11,3,2,1,7,3,2,6,2,2,4,1,2,2,6,4,3,7,5,1,5,2,1,5,5,3,2,9,2,3,8,6,2,2,2,1,9,4,2,7,6,5,1,3,2,9,10,3,7,6,12,6,12,3,2,1,2,5,3,2,6,1,3,5,3,4,1,14,3,7,3,4,5,1,7,4,9,2,11,10,2,1,8,12,1,1,4,7,4,1,2,1,2,15,6,3,5,13,12,2,25,12,4,17,10,13,17,4,1,1,3,1,1,2,2,1,2,1,2,1,1,1,1,5,1,17,1,2,2,2,3,4,6,2,9,1,4,5,2,1,2,1,1,1,2,6,1,2,9,9,2,5,4],
                    ['Utbryterstemmer', 2,1,12,7,2,27,10,6,4,2,3,4,12,10,14,7,32,9,4,10,3,23,12,4,22,1,10,10,1,23,19,11,24,2,12,3,2,29,6,17,32,7,11,14,4,12,5,15,6,1,5,8,5,5,10,1,4,5,9,7,3,19,5,5,8,8,8,2,12,2,6,10,21,6,8,1,3,1,29,14,9,20,28,16,7,5,7,1,2,13,6,8,20,12,24,12,14,21,4,2,2,12,4,2,9,4,3,4,2,2,2,8,4,6,17,7,1,5,4,1,5,54,6,2,10,3,7,11,9,2,4,3,4,16,12,3,10,11,7,1,4,2,14,27,4,8,13,17,6,23,3,2,1,2,8,7,2,6,1,3,7,4,4,1,28,5,9,3,6,8,1,16,6,12,2,32,16,5,1,31,17,1,1,6,12,8,2,2,3,2,20,8,4,7,14,14,5,38,20,4,20,12,14,31,5,1,1,3,2,2,3,6,1,4,2,5,1,2,1,3,12,1,30,1,2,3,2,4,4,15,3,11,1,6,8,2,1,2,1,1,1,2,8,1,2,25,14,4,7,5]
                ],
                type: 'scatter'
            },
            axis: {
                x: {
                    label: 'Utbryterstemmer',
                    tick: {
                        fit: false
                    }
                },
                y: {
                    label: 'Avstemninger'
                }
            },
            legend: { show: false },
            tooltip: {
                format: {
                    title: function (d) { return 'Utbryterstemmer: ' + d; },
                    value: function (value, ratio, id) { return value; }
                }
            }
        });
    }

    function hours() {
        var data = [["07",1],["08",28],["09",133],["10",135],["11",371],["12",383],["13",407],["14",467],["15",318],["16",488],["17",382],["18",546],["19",496],["20",452],["21",251],["22",433],["23",190], ["24",80], ["01",0],["02",0],["03",0],["04",0],["05",0],["06",0]];

        var chart = c3.generate({
            bindto: '#nar-stemmes-det-pa-stortinget-hours',
            data: {
                x: 'Time på døgnet',
                columns: [
                    ['Time på døgnet'].concat(data.map(function (e) { return e[0]; })),
                    ['Antall avstemninger'].concat(data.map(function (e) { return e[1]; }))

                ],
                type: 'bar'

            },
            transition: { duration: 0},
            axis: {
                x: { type: 'category' }
            }
        });
    }

    function rebelHours() {
        var data = [["07", 0], ["08", 0], ["09", 32], ["10", 35], ["11", 155], ["12", 177], ["13", 131], ["14", 179], ["15", 111], ["16", 165], ["17", 164], ["18", 153], ["19", 291], ["20", 242], ["21", 101], ["22", 122], ["23", 48], ["24", 11], ["01", 0], ["02", 0], ["03", 0], ["04", 0], ["05", 0], ["06", 0]];

        var chart = c3.generate({
            bindto: '#nar-stemmes-det-pa-stortinget-rebel-hours',
            data: {
                x: 'Time på døgnet',
                columns: [
                    ['Time på døgnet'].concat(data.map(function (e) { return e[0]; })),
                    ['Antall utrbyterstemmer'].concat(data.map(function (e) { return e[1]; }))

                ],
                type: 'bar'
            },
            transition: { duration: 0},
            axis: {
                x: { type: 'category' }
            }
        });
    }



    function dayCounts() {
        var days = [["2009-2010", 67], ["2010-2011", 72], ["2011-2012", 71], ["2012-2013", 65], ["2013-2014", 57]];
        var votes = [["2009-2010", 947], ["2010-2011", 1196], ["2011-2012", 1032], ["2012-2013", 1453], ["2013-2014", 657]];

        var chart = c3.generate({
            bindto: '#nar-stemmes-det-pa-stortinget-day-counts',
            data: {
                x: 'Stortingssesjon',
                columns: [
                    ['Stortingssesjon'].concat(days.map(function (e) { return e[0]; })),
                    ['Antall dager med avstemninger'].concat(days.map(function (e) { return e[1]; })),
                    ['Antall avstemninger'].concat(votes.map(function (e) { return e[1]; }))
                ],
                type: 'spline',
                axes: {
                    'Antall dager med avstemninger': 'y',
                    'Antall avstemninger': 'y2'
                }

            },
            axis: {
                rotated: false,
                x: { type: 'category' },
                y: { min: 0 },
                y2: { show: true, min: 0 }
            },
            transition: { duration: 0 },
            point: { show: false}
        });
    }

    heatmap('votes');
    dayCounts();
    hours();
    rebelHours();
    scatter();

}());

